<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Lager App</title>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
</head>

<body>

<div id="appContainer">

    <!-- ▌ OBERER TEIL (NICHT MEHR ÄNDERN!)  -->
    <div id="topArea">
        <div class="counterRow">
            <div class="counterBox"><span class="label">Artikel:</span><span id="countItems">0</span></div>
            <div class="counterBox"><span class="label">Menge:</span><span id="countQty">0</span></div>
        </div>
        <div class="counterRow">
            <div class="counterBox"><span class="label">Wert Jetzt:</span><span id="valueNow">0 €</span></div>
            <div class="counterBox"><span class="label">Wert Gesamt:</span><span id="valueTotal">0 €</span></div>
        </div>

        <div id="buttonRow">
            <button class="mainBtn" onclick="openAddPopup()">Artikel anlegen</button>
            <button class="mainBtn" onclick="openSearchPopup()">Suchen</button>
            <button class="mainBtn" onclick="exportBackup()">Backup speichern</button>
            <button class="mainBtn" onclick="importBackup()">Backup laden</button>
            <button class="mainBtn" onclick="generatePDF()">Inventur PDF</button>
        </div>
    </div>

    <!-- ▌ TABELLENBEREICH -->
    <div id="tableContainer">
        <div id="tableWrapper">
            <table id="articleTable">
                <thead>
                    <tr>
                        <th>Nr</th>
                        <th>Name</th>
                        <th>Menge</th>
                        <th>Preis</th>
                        <th>Ort</th>
                        <th>Datum</th>
                        <th>Größe</th>
                        <th>Bild</th>
                        <th>Notiz</th>
                        <th>Bearbeiten</th>
                        <th>Mark.</th>
                        <th>Löschen</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

</div>

<!-- ▌ POPUP: ARTIKEL ANLEGEN -->
<div id="popupOverlay" class="hidden">
    <div id="popup">
        <h2>Artikel anlegen</h2>

        <label>Artikelnummer</label>
        <input id="addNr">

        <label>Artikelname</label>
        <input id="addName">

        <label>Menge</label>
        <input type="number" id="addQty">

        <label>Preis (€)</label>
        <input type="number" step="0.01" id="addPrice">

        <label>Ort</label>
        <input id="addWhere">

        <label>Kaufdatum</label>
        <input id="addDate" type="date">

        <label>Größe</label>
        <input id="addSize">

        <label>Notiz</label>
        <textarea id="addNote"></textarea>

        <label>Bild / Rechnung</label>
        <input type="file" id="addImage">

        <div class="popupButtons">
            <button onclick="saveArticle()" class="saveBtn">Speichern</button>
            <button onclick="closePopup()" class="cancelBtn">Abbrechen</button>
        </div>
    </div>
</div>

<!-- ▌ POPUP: SUCHE -->
<div id="searchOverlay" class="hidden">
    <div id="searchPopup">
        <h2>Suche in…</h2>

        <button class="searchBtn" onclick="selectSearchColumn('nr')">Artikelnummer</button>
        <button class="searchBtn" onclick="selectSearchColumn('name')">Name</button>
        <button class="searchBtn" onclick="selectSearchColumn('date')">Datum</button>
        <button class="searchBtn" onclick="selectSearchColumn('size')">Größe</button>
        <button class="searchBtn" onclick="selectSearchColumn('where')">Ort</button>

        <button class="cancelBtn" onclick="closeSearchPopup()">Abbrechen</button>
    </div>
</div>

<script src="app.js"></script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    font-family: Arial;
}

#appContainer {
    width: 100%;
    overflow: hidden;
}

/* ▌ OBERER TEIL */
#topArea {
    width: 100%;
    background: #000;
    padding: 15px;
    box-sizing: border-box;
    position: relative;
}

.counterRow {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.counterBox {
    flex: 1;
    border: 1px solid #666;
    padding: 10px;
    border-radius: 10px;
    font-size: 14px;
}

.label {
    color: #87CEFA;
    margin-right: 5px;
}

#buttonRow {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}

.mainBtn {
    flex: 1;
    padding: 10px;
    background: transparent;
    border: 1px solid #666;
    border-radius: 10px;
    color: #fff;
}

/* ▌ TABELLE */
#tableContainer {
    position: fixed;
    top: 240px; /* wird durch JS überschrieben */
    bottom: 0;
    left: 0;
    right: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    background: #000;
}

#tableWrapper {
    width: max-content;
    min-width: 100%;
}

table {
    border-collapse: collapse;
    width: 100%;
    color: #fff;
}

th {
    font-size: 13px;
    border-bottom: 1px solid #444;
    padding: 5px;
}

td {
    font-size: 13px;
    padding: 5px;
    border-bottom: 1px solid #333;
}

/* ▌ POPUP */
#popupOverlay, #searchOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    justify-content: center;
    align-items: center;
}

.hidden { display: none; }

#popup, #searchPopup {
    background: #111;
    padding: 20px;
    width: 85%;
    max-width: 350px;
    border-radius: 15px;
    border: 1px solid #555;
}

#popup input, #popup textarea {
    width: 100%;
    border: 1px solid #666;
    background: #000;
    color: #fff;
    margin-bottom: 10px;
    padding: 5px;
}

.popupButtons {
    display: flex;
    gap: 10px;
}

.saveBtn, .cancelBtn, .searchBtn {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    background: transparent;
    border: 1px solid #666;
    color: #fff;
}
