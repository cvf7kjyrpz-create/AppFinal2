<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
<title>Lager App</title>

<style>
body{
  margin:0;
  background:#000;
  color:white;
  font-family:Arial,sans-serif;
  overflow:hidden;
}

#topbar{
  position:fixed;
  top:0;
  left:0;
  right:0;
  padding:15px;
  background:#000;
  z-index:1000;
  border-bottom:2px solid #333;
}

#counterWrapper{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
}
.counter-box{
  padding:10px;
  border:1px solid #444;
  border-radius:10px;
  background:#000;
}
.counter-title{font-size:11px;color:#bbb;}
.counter-value{font-size:18px;font-weight:bold;}

#searchRow{margin-top:10px;}
#search{
  width:100%;
  padding:10px;
  border-radius:8px;
  background:#111;
  border:1px solid #444;
  color:white;
  box-sizing:border-box;
}

#buttonRow{
  margin-top:10px;
  display:flex;
  gap:8px;
}
#buttonRow button{
  flex:1;
  padding:10px;
  font-size:11px;
  color:#bbb;
  border-radius:10px;
  background:#000;
  border:1px solid #444;
  font-weight:bold;
}

/* ✅ HIER DER WICHTIGE FIX */
#tableContainer{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  background:#000;
  overflow-y:auto;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}

table{width:100%;border-collapse:collapse;}
th{
  background:#111;
  position:sticky;
  top:0;
  z-index:10;
  padding:6px;
  color:#bbb;
  font-size:10px;
  white-space:nowrap;
}
td{
  padding:5px;
  font-size:11px;
  border-bottom:1px solid #222;
  white-space:nowrap;
}
.marked{background:#222;}

.iconCell span{cursor:pointer;margin-right:8px;}
.iconCell span.delete{margin-left:18px;}

#popup,#viewPopup{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#111;
  padding:16px;
  border:2px solid #444;
  border-radius:12px;
  width:90%;
  max-width:360px;
  max-height:90vh;
  overflow-y:auto;
  overflow-x:hidden;
  display:none;
  z-index:9999;
}

.popup-row{margin-bottom:8px;}
.popup-row label{font-size:12px;color:#bbb;display:block;margin-bottom:3px;}
.popup-row input,.popup-row textarea{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid #444;
  background:#1a1a1a;
  color:white;
  box-sizing:border-box;
}

#popupButtons{display:flex;gap:8px;margin-top:10px;}
#popupButtons button{
  flex:1;
  padding:11px;
  border-radius:10px;
  background:#000;
  border:1px solid #444;
  color:white;
  font-weight:bold;
}

img.preview{max-width:100%;border-radius:8px;margin-top:10px;}
</style>
</head>

<body>

<div id="topbar">
  <div id="counterWrapper">
    <div class="counter-box"><div class="counter-title">Artikel im Bestand</div><div class="counter-value" id="countArtikel">0</div></div>
    <div class="counter-box"><div class="counter-title">Gegenstände insgesamt</div><div class="counter-value" id="countMenge">0</div></div>
    <div class="counter-box"><div class="counter-title">Warenwert aktuell (€)</div><div class="counter-value" id="countWert">0</div></div>
    <div class="counter-box"><div class="counter-title">Warenwert gesamt (€)</div><div class="counter-value" id="countWertTotal">0</div></div>
  </div>

  <div id="searchRow">
    <input id="search" placeholder="Suchen …">
  </div>

  <div id="buttonRow">
    <button id="btnAdd">Artikel anlegen</button>
    <button id="btnExport">Sichern</button>
    <button id="btnImport">Laden</button>
    <button id="btnPDF">PDF</button>
  </div>
</div>

<!-- ✅ Tabelle sitzt jetzt garantiert direkt unter dem Topbar -->
<div id="tableContainer">
  <table>
    <thead>
      <tr>
        <th>*</th>
        <th>Nr</th>
        <th>Name</th>
        <th>Menge</th>
        <th>Größe</th>
        <th>Preis</th>
        <th>Ort</th>
        <th>Datum</th>
        <th>Aktionen</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<!-- POPUPS bleiben unverändert -->
<div id="popup">
  <div class="popup-row"><label>Artikelnummer</label><input id="p_artnr"></div>
  <div class="popup-row"><label>Name</label><input id="p_name"></div>
  <div class="popup-row"><label>Menge</label><input type="number" id="p_menge" value="1"></div>
  <div class="popup-row"><label>Größe</label><input id="p_groesse"></div>
  <div class="popup-row"><label>Preis</label><input type="number" id="p_preis" step="0.01"></div>
  <div class="popup-row"><label>Ort</label><input id="p_ort"></div>
  <div class="popup-row"><label>Datum</label><input type="date" id="p_datum"></div>
  <div class="popup-row"><label>Bild</label><input type="file" id="p_bild"></div>
  <div class="popup-row"><label>Notiz</label><textarea id="p_notiz"></textarea></div>

  <div id="popupButtons">
    <button id="btnSave">Speichern</button>
    <button id="btnCancel">Abbrechen</button>
  </div>
</div>

<div id="viewPopup"></div>

<script>
const topbar=document.getElementById("topbar");
const tableContainer=document.getElementById("tableContainer");

function adjustTable(){
  const h=topbar.offsetHeight;
  tableContainer.style.top=h+"px";
}
window.addEventListener("load",adjustTable);
window.addEventListener("resize",adjustTable);

/* ✅ REST DEINES FUNKTIONSCODES BLEIBT UNVERÄNDERT
   (Speichern, Icons, Zähler, Export, Import etc.)  */
</script>

</body>
</html>
